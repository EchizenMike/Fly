<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>搜索</title>
<link rel="icon" href="favicon.ico" type="image/ico">
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/materialdesignicons.min.css" rel="stylesheet">
<link href="css/style.min.css" rel="stylesheet">
<link href="https://www.layuicdn.com/layui/css/layui.css" rel="stylesheet" type="text/css" />
</head>
  
<body>
<div class="lyear-layout-web">
  <div class="lyear-layout-container">
    <!--左侧导航-->
    <aside class="lyear-layout-sidebar">
      
      <!-- logo -->
      <div id="logo" class="sidebar-header">
        <a href="index.html"><img src="images/logo-sidebar.png" title="LightYear" alt="LightYear" /></a>
      </div>
      <div class="lyear-layout-sidebar-scroll"> 
        
       
              <nav class="sidebar-main">
          <ul class="nav nav-drawer">
            <li class="nav-item"> <a href="admin_index.html"><i class="mdi mdi-home"></i> 首页</a> </li>
       
            <li class="nav-item nav-item-has-subnav active open">
              <a href="javascript:void(0)"><i class="mdi mdi-account-search"></i>搜索</a>
              <ul class="nav nav-subnav">
                <li class="active"> <a href="lyear_forms_name_search.html">按姓名搜索</a> </li>
                <li> <a href="lyear_forms_id_search.html">按学号搜索</a> </li>
                <li > <a href="lyear_forms_grade_search.html">按年级搜索</a> </li>
              </ul>
            </li>
            
            <li class="nav-item nav-item-has-subnav">
              <a href="javascript:void(0)"><i class="mdi mdi-key-variant"></i>管理与维护</a>
              <ul class="nav nav-subnav">
                <li> <a href="lyear_forms_enable_mag.html">权限管理</a> </li>
                <li> <a href="lyear_forms_notice_mag.html">公告板发布</a> </li>
              </ul>
            </li>
          </ul>
        </nav>
        
        <div class="sidebar-footer">
      			<p class="copyright">Copyright &copy; 2020-2021. All rights reserved.<br /> 青岛市实验高级中学 版权所有<br /> 鲁ICP备06019373号-2</p> 
         </div>
      </div>
      
    </aside>
    <!--End 左侧导航-->
    
    <!--头部信息-->
    <header class="lyear-layout-header">
      
      <nav class="navbar navbar-default">
        <div class="topbar">
          
          <div class="topbar-left">
            <div class="lyear-aside-toggler">
              <span class="lyear-toggler-bar"></span>
              <span class="lyear-toggler-bar"></span>
              <span class="lyear-toggler-bar"></span>
            </div>
            <span class="navbar-page-title"> 搜索 </span>
          </div>
          
          <ul class="topbar-right">
            <li class="dropdown dropdown-profile">
              <a href="javascript:void(0)" data-toggle="dropdown">
                <span id="user">用户名<span class="caret"></span></span>
              </a>
              <ul class="dropdown-menu dropdown-menu-right">
                <!--<li> <a href="lyear_pages_profile.html"><i class="mdi mdi-account"></i> 个人信息</a> </li>
                <li> <a href="lyear_pages_edit_pwd.html"><i class="mdi mdi-lock-outline"></i> 修改密码</a> </li>-->
                <li> <a href="javascript:void(0)"><i class="mdi mdi-delete"></i> 清空缓存</a></li>
                <li class="divider"></li>
                <li> <a href="javascript:logout();"><i class="mdi mdi-logout-variant"></i> 退出登录</a> </li>
              </ul>
            </li>
            <!--切换主题配色-->
		    <li class="dropdown dropdown-skin">
			  <span data-toggle="dropdown" class="icon-palette"><i class="mdi mdi-palette"></i></span>
			  <ul class="dropdown-menu dropdown-menu-right" data-stopPropagation="true">
                <li class="drop-title"><p>主题</p></li>
                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="site_theme" value="default" id="site_theme_1" checked>
                    <label for="site_theme_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="site_theme" value="dark" id="site_theme_2">
                    <label for="site_theme_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="site_theme" value="translucent" id="site_theme_3">
                    <label for="site_theme_3"></label>
                  </span>
                </li>
			    <li class="drop-title"><p>LOGO</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="logo_bg" value="default" id="logo_bg_1" checked>
                    <label for="logo_bg_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_2" id="logo_bg_2">
                    <label for="logo_bg_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_3" id="logo_bg_3">
                    <label for="logo_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_4" id="logo_bg_4">
                    <label for="logo_bg_4"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_5" id="logo_bg_5">
                    <label for="logo_bg_5"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_6" id="logo_bg_6">
                    <label for="logo_bg_6"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_7" id="logo_bg_7">
                    <label for="logo_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_8" id="logo_bg_8">
                    <label for="logo_bg_8"></label>
                  </span>
				</li>
				<li class="drop-title"><p>头部</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="header_bg" value="default" id="header_bg_1" checked>
                    <label for="header_bg_1"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_2" id="header_bg_2">
                    <label for="header_bg_2"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_3" id="header_bg_3">
                    <label for="header_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="header_bg" value="color_4" id="header_bg_4">
                    <label for="header_bg_4"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_5" id="header_bg_5">
                    <label for="header_bg_5"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_6" id="header_bg_6">
                    <label for="header_bg_6"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_7" id="header_bg_7">
                    <label for="header_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="header_bg" value="color_8" id="header_bg_8">
                    <label for="header_bg_8"></label>
                  </span>
				</li>
				<li class="drop-title"><p>侧边栏</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="sidebar_bg" value="default" id="sidebar_bg_1" checked>
                    <label for="sidebar_bg_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_2" id="sidebar_bg_2">
                    <label for="sidebar_bg_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_3" id="sidebar_bg_3">
                    <label for="sidebar_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_4" id="sidebar_bg_4">
                    <label for="sidebar_bg_4"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_5" id="sidebar_bg_5">
                    <label for="sidebar_bg_5"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_6" id="sidebar_bg_6">
                    <label for="sidebar_bg_6"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_7" id="sidebar_bg_7">
                    <label for="sidebar_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_8" id="sidebar_bg_8">
                    <label for="sidebar_bg_8"></label>
                  </span>
				</li>
			  </ul>
			</li>
            <!--切换主题配色-->
          </ul>
          
        </div>
      </nav>
      
    </header>
    <!--End 头部信息-->
    
    <!--页面主要内容-->
    <main class="lyear-layout-content">
      
      <div class="container-fluid">
        
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header"><h4>按姓名搜索</h4></div>
              <div class="card-body">
                 <div class="input-group">
                   <input type="text" class="form-control" placeholder="请输入姓名..." id="scontent">
                     <span class="input-group-btn">
                       <button class="btn btn-default sub" type="button">搜索</button>
                     </span>
                    </div>
             
                
              </div>
            </div>
            
            <div class="card">
              <div class="card-header"><h4>搜索结果</h4></div>
              <div class="card-body">
                <!--<p style="text-align: center;">无内容</p>-->
                <table class="layui-hide" id="table" lay-filter="test"></table>  
              </div>
            </div>
            
          </div>
          
        </div>
        
      </div>
      
    </main>
    <!--End 页面主要内容-->
  </div>
</div>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/perfect-scrollbar.min.js"></script>
<script type="text/javascript" src="js/main.min.js"></script>
<script type="text/javascript" src="js/cookie.js"></script>
<script src="https://www.layuicdn.com/layui/layui.js" charset="utf-8"></script>
<script type="text/html" id="bar">
  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
  <a class="layui-btn layui-btn-xs" lay-event="ach">成绩登记</a>
</script>
<script>
	var layer;
	layui.use('layer',function(){
		layer = layui.layer;
	});//加载layer模块
</script>
 <script>
function table(data){
layui.use('table', function(){
  var table = layui.table;
  //查询学生
  table.render({
    elem: '#table'
    ,url:'./php/select_userinfo_with_stu_name.php'
    ,method:'post'
    ,where:{'stu_name':data}
//  ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
//  ,defaultToolbar: ['filter', 'exports', 'print']
    ,title: '历史成绩登记记录'
    ,cols: [[
//     {type: 'checkbox',width:40}
			 {field:'username', title:'用户名', width:150, unresize: true}		
      ,{field:'stu_id', title:'学籍号', width:150, unresize: true}
      ,{field:'stu_self_id', title:'证件号码', width:150, unresize: true}
      ,{field:'stu_name', title:'姓名', width:80, unresize: true}
      ,{field:'stu_sex', title:'性别', width:80, edit: 'text'}
      ,{field:'stu_nation', title:'民族', width:80, edit: 'text'}
      ,{field:'stu_date', title:'出生日期', width:100, edit: 'text'}
      ,{field:'stu_age', title:'年龄', width:80, edit: 'text'}
      ,{field:'stu_grade', title:'年级', width:80, edit: 'text'}
      ,{field:'stu_class', title:'班级', width:80, edit: 'text'}
      ,{field:'stu_chuzhong', title:'性别', width:80, edit: 'text'}
      ,{field:'stu_premaj', title:'入学前专业', width:100, edit: 'text'}
      ,{field:'stu_premaj_ach', title:'专业成绩', width:100, edit: 'text'}
      ,{field:'stu_type', title:'学生类型', width:100, edit: 'text'}
      ,{field:'stu_maj_type', title:'主修专业类型1', width:140, edit: 'text'}
      ,{field:'stu_maj', title:'主修专业1', width:100, edit: 'text'}
      ,{field:'stu_maj_type2', title:'主修专业类型2', width:140, edit: 'text'}
      ,{field:'stu_maj2', title:'主修专业2', width:100, edit: 'text'}
      ,{field:'stu_maj_type3', title:'主修专业类型3', width:140, edit: 'text'}
      ,{field:'stu_maj3', title:'主修专业3', width:100, edit: 'text'}
      ,{field:'stu_maj_type4', title:'主修专业类型4', width:140, edit: 'text'}
      ,{field:'stu_maj4', title:'主修专业4', width:100, edit: 'text'}
      ,{field:'stu_home_father_name', title:'父亲姓名', width:100, edit: 'text'}
      ,{field:'stu_home_father_phone', title:'联系方式', width:100, edit: 'text'}
      ,{field:'stu_home_mother_name', title:'母亲姓名', width:100, edit: 'text'}
      ,{field:'stu_home_mother_phone', title:'联系方式', width:100, edit: 'text'}
      ,{field:'stu_honor', title:'获得奖惩', width:140, edit: 'text'}
      ,{field:'stu_punish', title:'惩戒记录', width:140, edit: 'text'}
      ,{fixed: 'right', title:'操作', toolbar: '#bar', width:200}
    ]]
    , done: function (res, curr, count) {
            $("table").css("width", "100%");                 
         }
    ,page: true
  });
  
  //监听行工具事件
  table.on('tool(test)', function(obj){
    var data = obj.data;
    //console.log(obj)
    if(obj.event === 'detail'){
      layer.open({
      type: 2,
      title: '查看用户信息',
      shadeClose: true,
      shade: false,
      maxmin: true, //开启最大化最小化按钮
      area: ['80%', '80%'],
      content: 'lyear_forms_admin_stuinfo.html?user='+data.username
    });
     
    }
    if(obj.event === 'edit'){
      layer.open({
      type: 2,
      title: '编辑用户信息',
      shadeClose: true,
      shade: false,
      maxmin: true, //开启最大化最小化按钮
      area: ['80%', '80%'],
      content: 'lyear_forms_admin_elements.html?user='+data.username
    });
    }
    
    if(obj.event === 'ach'){
		layer.open({
      type: 2,
      title: '编辑成绩',
      shadeClose: true,
      shade: false,
      maxmin: true, //开启最大化最小化按钮
      area: ['80%', '80%'],
      content: 'lyear_pages_admin_edit_ach.html?user='+data.username
    });
    }
      
  });
});

}
table(null);
</script>
<script>
	$('.sub').on('click', function () {
		var val	= document.getElementById("scontent").value;
	  table(val);
	
	});
</script>
<!--<script>
	//防非法登录
$(document).ready(function(){
   var name = getCookie("admin").toString();
	 if(name==""){//检查是否为超级管理员
	 	alert("非管理员禁止访问！");
	 	window.location.href = "about:black";
	 	window.stop();
	 	window.opener=null;
	 	window.open('','_self');
	 	window.close();//关闭窗口
	 	return false;
	 }
	});//onload之前
</script>-->
<script>
	if(getCookie("admin").toString() == ''){
		window.location.href = 'admin_login.html';
	}
	document.getElementById("user").innerHTML = getCookie("admin").toString();
</script>
<script>
	function logout(){	
			$.ajax({
				type:"post",
				url:"./php/logout_dev.php",
				async:true,
				dataType:'json',
				data:{"username":getCookie("admin").toString()},
				success:function(data){
					if(data.code == 0){//已退出一台设备
						  clearCookie('admin');
							window.location.href = 'admin_login.html';
					}else{
						layer.msg('后端处理出现错误，无法退出，请联系管理员！', {icon:5,anim:6});
					}
				}
			});

	}
</script>
</body>
</html>